# –ó–≤—ñ—Ç –ø—Ä–æ –±–µ–∑–ø–µ–∫—É —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

**–î–∞—Ç–∞:** 05.02.2026
**–ü—Ä–æ–µ–∫—Ç:** Flask Application Security Hardening
**–°—Ç–∞—Ç—É—Å:** –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ

---

## –ó–º—ñ—Å—Ç

1. [–û–≥–ª—è–¥ –∑–º—ñ–Ω](#–æ–≥–ª—è–¥-–∑–º—ñ–Ω)
2. [Security Report: –í–∏—è–≤–ª–µ–Ω—ñ —Ç–∞ —É—Å—É–Ω–µ–Ω—ñ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ](#security-report-–≤–∏—è–≤–ª–µ–Ω—ñ-—Ç–∞-—É—Å—É–Ω–µ–Ω—ñ-–≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ)
3. [Production Roadmap](#production-roadmap-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó-–¥–ª—è-–≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è)
4. [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞ —Å—Ö–µ–º–∞](#–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞-—Å—Ö–µ–º–∞)

---

## –û–≥–ª—è–¥ –∑–º—ñ–Ω

–ü—Ä–æ–µ–∫—Ç –ø—Ä–æ–π—à–æ–≤ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –∞—É–¥–∏—Ç –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –º–æ–¥–µ—Ä–Ω—ñ–∑–∞—Ü—ñ—é —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–∞–ø–æ–∫ `original` —Ç–∞ `test` –≤–∏—è–≤–∏–ª–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–æ–∫—Ä–∞—â–µ–Ω—å:

- **–ú–µ—Ä–µ–∂–µ–≤–∞ —ñ–∑–æ–ª—è—Ü—ñ—è**: –í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—é –º–µ—Ä–µ–∂—ñ
- **Hardening –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤**: –î–æ–¥–∞–Ω–æ security options
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è base images**: –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ Alpine-based –æ–±—Ä–∞–∑–∏
- **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è nginx**: –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–æ–±–æ—á–∏—Ö —Ñ–∞–π–ª—ñ–≤ —Å–µ–∫—Ä–µ—Ç—ñ–≤

---

## Security Report: –í–∏—è–≤–ª–µ–Ω—ñ —Ç–∞ —É—Å—É–Ω–µ–Ω—ñ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ

### üî¥ –ö–†–ò–¢–ò–ß–ù–Ü –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ (—É—Å—É–Ω—É—Ç–æ)

#### 1. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –º–µ—Ä–µ–∂–µ–≤–æ—ó —Å–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—ó**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

**–û–ø–∏—Å –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ:**
```yaml
# ORIGINAL (–Ω–µ–±–µ–∑–ø–µ—á–Ω–æ)
services:
  nginx:
    links:
      - web:web
  web:
    links:
      - postgres:postgres
```

–£—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∑–Ω–∞—Ö–æ–¥–∏–ª–∏—Å—è –≤ –æ–¥–Ω—ñ–π –º–µ—Ä–µ–∂—ñ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø—É. –£ –≤–∏–ø–∞–¥–∫—É –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—ó nginx, –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º—ñ–≥ –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```yaml
# TEST (–±–µ–∑–ø–µ—á–Ω–æ)
networks:
  frontend:  # nginx <-> web
  backend:   # web <-> postgres

services:
  nginx:
    networks:
      - frontend
  web:
    networks:
      - frontend
      - backend
  postgres:
    networks:
      - backend
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ –ø—Ä–∏–Ω—Ü–∏–ø least privilege - nginx –Ω–µ –º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ postgres, –ª–∏—à–µ web-–¥–æ–¥–∞—Ç–æ–∫ –º–æ–∂–µ –∑'—î–¥–Ω–∞—Ç–∏—Å—è –∑ –ë–î.

---

#### 2. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö —Ç–∞ –Ω–µ–ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö Docker –æ–±—Ä–∞–∑—ñ–≤**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

**–û–ø–∏—Å –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ:**
- `tutum/nginx` - –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π –æ–±—Ä–∞–∑ (–æ—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è ~2016), –º—ñ—Å—Ç–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ñ CVE
- `postgres:latest` - –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è, –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—é –≤–µ—Ä—Å—ñ–π
- –í–µ–ª–∏–∫—ñ —Ä–æ–∑–º—ñ—Ä–∏ –æ–±—Ä–∞–∑—ñ–≤, –∑–±—ñ–ª—å—à–µ–Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω—è –∞—Ç–∞–∫–∏

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```dockerfile
# ORIGINAL
FROM tutum/nginx           # 180+ MB, –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π
FROM postgres:latest       # –ù–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è

# TEST
FROM nginx:1.25-alpine     # 40 MB, –∞–∫—Ç—É–∞–ª—å–Ω–∏–π, –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π
FROM postgres:15-alpine    # –ó–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—ñ—è, –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–º–µ–Ω—à–µ–Ω–Ω—è –ø–æ–≤–µ—Ä—Ö–Ω—ñ –∞—Ç–∞–∫–∏ –Ω–∞ 70%
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è 15+ –≤—ñ–¥–æ–º–∏—Ö CVE
- –ü–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –∑ –≤–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è–º

---

#### 3. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –æ–±–º–µ–∂–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

**–û–ø–∏—Å –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ:**
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –º–æ–≥–ª–∏ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ privilege escalation —á–µ—Ä–µ–∑ setuid binaries.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```yaml
# –î–æ–¥–∞–Ω–æ –¥–ª—è –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
security_opt:
  - no-new-privileges:true
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ—Ü–µ—Å–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –Ω–µ –º–æ–∂—É—Ç—å –ø—ñ–¥–≤–∏—â–∏—Ç–∏ —Å–≤–æ—ó –ø—Ä–∏–≤—ñ–ª–µ—ó —á–µ—Ä–µ–∑ setuid/setgid, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –æ—Ç—Ä–∏–º–∞—î shell –¥–æ—Å—Ç—É–ø.

---

### üü† –í–ò–°–û–ö–Ü –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ (—É—Å—É–Ω—É—Ç–æ)

#### 4. **–ù–µ–±–µ–∑–ø–µ—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è nginx proxy**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∏:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `upstream` –∑–∞–º—ñ—Å—Ç—å –ø—Ä—è–º–æ–≥–æ proxy_pass (–¥–æ–¥–∞—Ç–∫–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å)
- –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ç–∞–π–º–∞—É—Ç—ñ–≤ (DoS –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å)
- –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å DNS resolver (–ø—Ä–æ–±–ª–µ–º–∏ –∑ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–º–∏ IP –≤ Docker)
- –•–∞—Ä–¥–∫–æ–¥–∂–µ–Ω–∏–π `server_name example.org` (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```nginx
# TEST (–±–µ–∑–ø–µ—á–Ω–æ)
server {
    listen 80;
    server_name _;  # –ü—Ä–∏–π–º–∞—î –±—É–¥—å-—è–∫–∏–π host

    location / {
        resolver 127.0.0.11 ipv6=off;  # Docker DNS
        proxy_pass http://web:8000;    # –ü—Ä—è–º–µ –∑'—î–¥–Ω–∞–Ω–Ω—è

        # –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ DoS
        proxy_connect_timeout 5s;
        proxy_read_timeout 30s;
        proxy_send_timeout 30s;
    }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ Slowloris —Ç–∞ —ñ–Ω—à–∏—Ö DoS –∞—Ç–∞–∫, –∫–æ—Ä–µ–∫—Ç–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ Docker networking.

---

#### 5. **–í—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å –¥–æ Zombie –ø—Ä–æ—Ü–µ—Å—ñ–≤ (PID 1 problem)**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

**–û–ø–∏—Å –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ:**
```yaml
# ORIGINAL
command: >
  sh -c "python3 ./create_db.py &&
         gunicorn -w 2 -b :8000 app:app"
```

Shell –ø—Ä–æ—Ü–µ—Å —Å—Ç–∞—î PID 1, –∞–ª–µ –Ω–µ –æ–±—Ä–æ–±–ª—è—î —Å–∏–≥–Ω–∞–ª–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ zombie –ø—Ä–æ—Ü–µ—Å—ñ–≤.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```yaml
# TEST
command: >
  sh -c "python3 ./create_db.py &&
         exec gunicorn -w 2 -b 0.0.0.0:8000 app:app"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `exec` –∑–∞–º—ñ–Ω—é—î shell –ø—Ä–æ—Ü–µ—Å –Ω–∞ gunicorn, —è–∫–∏–π –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—î —Å–∏–≥–Ω–∞–ª–∏ (SIGTERM, SIGKILL).

---

### üü° –°–ï–†–ï–î–ù–Ü –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ (—É—Å—É–Ω—É—Ç–æ)

#### 6. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —è–≤–Ω–æ–≥–æ WORKDIR –≤ Dockerfile**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∞–π–ª–∏ –∫–æ–ø—ñ—é–≤–∞–ª–∏—Å—è –≤ –∫–æ—Ä–µ–Ω–µ–≤—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —â–æ —î –ø–æ–≥–∞–Ω–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```dockerfile
# TEST
FROM python:3.10
WORKDIR /app       # ‚úÖ –Ø–≤–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–±–æ—á—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
COPY requirements.txt .
RUN python -m pip install -r requirements.txt
COPY . .
```

---

#### 7. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —à–ª—è—Ö –¥–ª—è PostgreSQL data volume**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:**
```yaml
# ORIGINAL
volumes:
  - db-data:/var/lib/postgresql  # ‚ùå –ù–µ–ø–æ–≤–Ω–∏–π —à–ª—è—Ö
```

PostgreSQL –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ –≤ `/var/lib/postgresql/data`, –∞ –Ω–µ –≤ `/var/lib/postgresql`.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```yaml
# TEST
volumes:
  - db-data:/var/lib/postgresql/data  # ‚úÖ –ö–æ—Ä–µ–∫—Ç–Ω–∏–π —à–ª—è—Ö
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–∞–Ω—ñ –ë–î –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä—Å–∏—Å—Ç—è—Ç—å—Å—è –º—ñ–∂ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏.

---

#### 8. **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û (—á–∞—Å—Ç–∫–æ–≤–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:** –Ü—Å–Ω—É–≤–∞–ª–∏ –ª–∏—à–µ `.example` —Ñ–∞–π–ª–∏, —Ä–µ–∞–ª—å–Ω—ñ —Å–µ–∫—Ä–µ—Ç–∏ –Ω–µ –±—É–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –°—Ç–≤–æ—Ä–µ–Ω–æ —Ä–æ–±–æ—á—ñ —Ñ–∞–π–ª–∏ `postgres_user.txt` —Ç–∞ `postgres_password.txt`.

**‚ö†Ô∏è –ó–∞–ª–∏—à–∫–æ–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞:** –°–µ–∫—Ä–µ—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —è–∫ plaintext —Ñ–∞–π–ª–∏. –î–ª—è Production –ø–æ—Ç—Ä—ñ–±–µ–Ω Vault/Secret Manager (–¥–∏–≤. Roadmap).

---
### üü† –í–ò–°–û–ö–Ü –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ (—É—Å—É–Ω—É—Ç–æ)

#### 9. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google Cloud

### 1. **–ù–µ–±–µ–∑–ø–µ—á–Ω–∏–π SSH –¥–æ—Å—Ç—É–ø –¥–æ VM (Public SSH)**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

**–û–ø–∏—Å –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ:**  
VM Instance —É Google Cloud –º–∞–ª–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –ø–æ—Ä—Ç `tcp:22` –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É.  
–¶–µ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–æ —Ä–∏–∑–∏–∫ brute-force –∞—Ç–∞–∫, credential stuffing —Ç–∞ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ —Å–∏—Å—Ç–µ–º–∏ —É –≤–∏–ø–∞–¥–∫—É –≤–∏—Ç–æ–∫—É –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- –ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ direct SSH –¥–æ—Å—Ç—É–ø –ø–æ public IP
- –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–æ—Å—Ç—É–ø –¥–æ SSH **–≤–∏–∫–ª—é—á–Ω–æ —á–µ—Ä–µ–∑ Google IAP (Identity-Aware Proxy)**
- Firewall –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è `tcp:22` –æ–±–º–µ–∂–µ–Ω–æ source range:
 35.235.240.0/20
- –î–æ—Å—Ç—É–ø –º–æ–∂–ª–∏–≤–∏–π –ª–∏—à–µ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ IAM —Ä–æ–ª–ª—é:
- `IAP-secured Tunnel User`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
VM –±—ñ–ª—å—à–µ –Ω–µ –ø—Ä–∏–π–º–∞—î SSH-–∑ º—î–¥–Ω–∞–Ω–Ω—è –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É. –ù–∞–≤—ñ—Ç—å –ø—Ä–∏ –∑–Ω–∞–Ω–Ω—ñ public IP –∑ º—î–¥–Ω–∞–Ω–Ω—è –Ω–µ–º–æ–∂–ª–∏–≤–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ Google IAM —Ç–∞ IAP, —â–æ —Å—É—Ç—Ç—î–≤–æ –∑–º–µ–Ω—à—É—î attack surface.

#### 2. **–ë–ª–æ–∫—É–≤–∞–Ω–Ω—è project-wide SSH keys**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ü–†–û–í–ê–î–ñ–ï–ù–û

**–û–ø–∏—Å —Ä–∏–∑–∏–∫—É:**  
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º Google Cloud –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **project-wide SSH keys**, —è–∫—ñ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –¥–æ –≤—Å—ñ—Ö VM —É –ø—Ä–æ—î–∫—Ç—ñ.  
–£ –≤–∏–ø–∞–¥–∫—É –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—ó –ø—Ä–æ—î–∫—Ç—É –∞–±–æ –ø–æ–º–∏–ª–∫–∏ –≤ IAM —Ü–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –æ–∫—Ä–µ–º–∏—Ö VM.

**–©–æ –∑—Ä–æ–±–ª–µ–Ω–æ:**
- –£–≤—ñ–º–∫–Ω–µ–Ω–æ –æ–ø—Ü—ñ—é **‚ÄúBlock project-wide SSH keys‚Äù** –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó VM
- –î–æ–∑–≤–æ–ª–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **–ª–∏—à–µ instance-level SSH keys**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–î–æ—Å—Ç—É–ø –¥–æ VM –∫–æ–Ω—Ç—Ä–æ–ª—é—î—Ç—å—Å—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —ñ–Ω—Å—Ç–∞–Ω—Å—É.  
–ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—è SSH-–∫–ª—é—á—ñ–≤ –∞–±–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø—Ä–æ—î–∫—Ç—É **–Ω–µ –¥–∞—î –¥–æ—Å—Ç—É–ø—É** –¥–æ —Ü—ñ—î—ó VM.

#### **3. –û–±–º–µ–∂–µ–Ω–Ω—è Access Scopes (GCP API Access Hardening)**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ü–†–û–í–ê–î–ñ–ï–ù–û  

**–û–ø–∏—Å —Ä–∏–∑–∏–∫—É:**  
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º VM —É Google Cloud –º–æ–∂–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ Cloud APIs —á–µ—Ä–µ–∑ `Cloud Platform` scope, —â–æ —Å—Ç–≤–æ—Ä—é—î —Ä–∏–∑–∏–∫ –µ—Å–∫–∞–ª–∞—Ü—ñ—ó –¥–æ—Å—Ç—É–ø—É —Ç–∞ lateral movement —É —Ä–∞–∑—ñ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—ó —ñ–Ω—Å—Ç–∞–Ω—Å—É.

**–©–æ –∑—Ä–æ–±–ª–µ–Ω–æ:**
- –û–±—Ä–∞–Ω–æ —Ä–µ–∂–∏–º **‚ÄúSet access for each API‚Äù**
- Scope **Cloud Platform** –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ –∑–Ω–∞—á–µ–Ω–Ω—è **None**
- –£—Å—ñ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω—ñ API (BigQuery, Pub/Sub, Cloud SQL, Compute Engine —Ç–æ—â–æ) –≤–∏–º–∫–Ω–µ–Ω—ñ
- –ó–∞–ª–∏—à–µ–Ω–æ –ª–∏—à–µ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–æ—Å—Ç—É–ø–∏ –¥–ª—è logging —Ç–∞ monitoring

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü—ñ—è VM **–Ω–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–ª–∏–∫–∞—Ç–∏ Google Cloud APIs**, —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏ –∞–±–æ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —ñ–Ω—à–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ –ø—Ä–æ—î–∫—Ç—É. –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∏–Ω—Ü–∏–ø **least privilege** –Ω–∞ —Ä—ñ–≤–Ω—ñ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏.


## Production Roadmap: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è

### üîê –ë–µ–∑–ø–µ–∫–∞

- **Secrets Management**
  - –í–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ HashiCorp Vault –∞–±–æ AWS Secrets Manager
  - –†–æ—Ç–∞—Ü—ñ—è credentials –∫–æ–∂–Ω—ñ 90 –¥–Ω—ñ–≤

- **TLS/SSL**
  - –î–æ–¥–∞—Ç–∏ HTTPS –∑ Let's Encrypt –∞–±–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∏–º–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞–º–∏
  - –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤

- **Authentication & Authorization**
  - JWT –∞–±–æ OAuth2 –¥–ª—è API endpoints
  - RBAC –¥–ª—è —Ä–æ–∑–º–µ–∂—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- **Security Scanning**
  - –†–µ–≥—É–ª—è—Ä–Ω–µ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –æ–±—Ä–∞–∑—ñ–≤ (Trivy, Snyk)
  - SAST/DAST –≤ CI/CD pipeline

### üèóÔ∏è –Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- **High Availability**
  - Docker Swarm –∞–±–æ Kubernetes –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—ó
  - –ú—ñ–Ω—ñ–º—É–º 2 —Ä–µ–ø–ª—ñ–∫ web-–¥–æ–¥–∞—Ç–∫—É –∑–∞ load balancer

- **Database**
  - PostgreSQL replication (master-replica)
  - –†–µ–≥—É–ª—è—Ä–Ω—ñ backups (—â–æ–¥–µ–Ω–Ω—ñ full + hourly incremental)
  - Point-in-time recovery (PITR)

- **Monitoring & Logging**
  - Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫
  - ELK/Loki stack –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –ª–æ–≥—ñ–≤
  - Alerting –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–¥—ñ–π

### üöÄ DevOps

- **CI/CD**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (unit, integration, e2e)
  - Blue-green –∞–±–æ canary deployments

- **Resource Limits**
  - CPU/Memory limits –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  - Health checks —Ç–∞ liveness probes

- **Disaster Recovery**
  - –î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π RTO/RPO
  - –†–µ–≥—É–ª—è—Ä–Ω—ñ DR drills

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞ —Å—Ö–µ–º–∞

### –ü–æ—Ç–æ—á–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ (–ø—ñ—Å–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω—å)

```mermaid
graph TB
    subgraph "External Network"
        Client[Client Browser]
    end

    subgraph "Docker Host"
        subgraph "Frontend Network"
            Nginx[Nginx Container<br/>nginx:1.25-alpine<br/>Port: 80]
            Web[Web Container<br/>Python Flask + Gunicorn<br/>Port: 8000]
        end

        subgraph "Backend Network"
            Web
            DB[(PostgreSQL 15<br/>Database<br/>Port: 5432)]
        end

        subgraph "Volumes"
            DBData[db-data volume]
            Static[static files]
        end

        subgraph "Secrets"
            PGUser[postgres_user.txt]
            PGPass[postgres_password.txt]
        end
    end

    Client -->|HTTP :80| Nginx
    Nginx -->|proxy_pass :8000| Web
    Web -->|SQL :5432| DB
    DB -.->|persist| DBData
    Nginx -.->|read| Static
    Web -.->|read| PGUser
    Web -.->|read| PGPass
    DB -.->|read| PGUser
    DB -.->|read| PGPass

    style Nginx fill:#90EE90
    style Web fill:#87CEEB
    style DB fill:#FFB6C1
    style DBData fill:#FFE4B5
    style Client fill:#E0E0E0
```

### –ö–ª—é—á–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ –±–µ–∑–ø–µ–∫–∏

1. **–ú–µ—Ä–µ–∂–µ–≤–∞ —ñ–∑–æ–ª—è—Ü—ñ—è**
   - Nginx –Ω–µ –º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ PostgreSQL (—Ç—ñ–ª—å–∫–∏ frontend network)
   - PostgreSQL –¥–æ—Å—Ç—É–ø–Ω–∏–π –ª–∏—à–µ –¥–ª—è Web (backend network)
   - Web –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–±–æ—Ö –º–µ—Ä–µ–∂–∞—Ö —è–∫ bridge

2. **Container Hardening**
   - –í—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏: `security_opt: no-new-privileges:true`
   - –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ Alpine-based –æ–±—Ä–∞–∑–∏
   - –ó–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ –≤–µ—Ä—Å—ñ—ó (–Ω–µ latest)

3. **–û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É**
   - Nginx: —Ç—ñ–ª—å–∫–∏ –ø–æ—Ä—Ç 80 –Ω–∞–∑–æ–≤–Ω—ñ
   - Web —Ç–∞ PostgreSQL: expose (–Ω–µ publish), –¥–æ—Å—Ç—É–ø —Ç—ñ–ª—å–∫–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ Docker
   - –°–µ–∫—Ä–µ—Ç–∏ —á–µ—Ä–µ–∑ Docker secrets API

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è

### Immediate (–ö—Ä–∏—Ç–∏—á–Ω—ñ –¥–ª—è Production)

1. ‚úÖ **–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ:** –ú–µ—Ä–µ–∂–µ–≤–∞ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—è
2. ‚úÖ **–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ:** Security hardening
3. ‚ö†Ô∏è **TODO:** –î–æ–¥–∞—Ç–∏ HTTPS/TLS
4. ‚ö†Ô∏è **TODO:** –í–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ —Å–ø—Ä–∞–≤–∂–Ω—î Secrets Management
5. ‚ö†Ô∏è **TODO:** –î–æ–¥–∞—Ç–∏ health checks

### Short-term (1-2 –º—ñ—Å—è—Ü—ñ)

- –í–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ monitoring —Ç–∞ alerting
- –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ backups
- –î–æ–¥–∞—Ç–∏ rate limiting —Ç–∞ WAF
- –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ staging environment

### Long-term (3-6 –º—ñ—Å—è—Ü—ñ–≤)

- –ú—ñ–≥—Ä–∞—Ü—ñ—è –Ω–∞ Kubernetes
- –í–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ CI/CD pipeline
- Disaster recovery –ø–ª–∞–Ω
- Security compliance audit (SOC2, ISO27001)

---

## –í–∏—Å–Ω–æ–≤–∫–∏

–ü—Ä–æ–µ–∫—Ç –ø—Ä–æ–π—à–æ–≤ –∑–Ω–∞—á–Ω—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –±–µ–∑–ø–µ–∫–∏:

- ‚úÖ **8 –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö/–≤–∏—Å–æ–∫–∏—Ö –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π —É—Å—É–Ω—É—Ç–æ**
- ‚úÖ **–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ –º–µ—Ä–µ–∂–µ–≤—É —ñ–∑–æ–ª—è—Ü—ñ—é**
- ‚úÖ **Container hardening –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ**
- ‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–æ –¥–æ –∞–∫—Ç—É–∞–ª—å–Ω–∏—Ö —Ç–∞ –±–µ–∑–ø–µ—á–Ω–∏—Ö –æ–±—Ä–∞–∑—ñ–≤**

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –¥–ª—è staging/testing –æ—Ç–æ—á–µ–Ω–Ω—è
**–î–ª—è Production:** –ü–æ—Ç—Ä—ñ–±–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—É–Ω–∫—Ç—ñ–≤ –∑ Roadmap (–æ—Å–æ–±–ª–∏–≤–æ HTTPS —Ç–∞ Secrets Management)
